/* Generell Dark Theme Styling */
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    background-color: #282c34; /* Mørk bakgrunn */
    color: #abb2bf; /* Lys grå tekst */
    line-height: 1.6;
    margin: 0;
    padding: 20px;
}

header {
    text-align: center;
    margin-bottom: 30px;
    border-bottom: 1px solid #444;
    padding-bottom: 15px;
}

h1 {
    color: #61afef; /* Lys blå for hovedtittel */
    margin-bottom: 5px;
}

header p {
    color: #98c379; /* Grønn for undertittel */
    font-style: italic;
}

h2, h3, h4 {
    color: #e5c07b; /* Gulaktig for seksjonstitler */
    margin-top: 0;
    margin-bottom: 15px;
    border-bottom: 1px solid #4b5263; /* Separator */
    padding-bottom: 5px;
}
h4 {
    font-size: 1.1em;
    margin-bottom: 10px;
    color: #c678dd; /* Lilla for panel-titler */
    border-bottom: none;
}

main {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 30px; /* Avstand mellom seksjoner */
}

.config-section, .game-section {
    background-color: #3b4048; /* Litt lysere mørk for seksjoner */
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #4b5263; /* Diskret kantlinje */
}

.hidden {
    display: none !important;
}

/* Innstillinger & Konfigurasjon */
.setting {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
    flex-wrap: wrap;
}

.setting label {
    min-width: 100px;
    text-align: right;
    color: #abb2bf;
    font-size: 0.95em;
}

.setting select, .setting input[type="number"], .setting input[type="text"], .setting textarea {
    flex-grow: 1;
    padding: 8px 10px;
    background-color: #21252b; /* Enda mørkere for input */
    color: #abb2bf;
    border: 1px solid #4b5263;
    border-radius: 4px;
    min-width: 150px;
    box-sizing: border-box;
}
.setting textarea {
     font-family: monospace;
     min-height: 150px;
     resize: vertical;
     width: 100%; /* Full bredde innenfor flex item */
     flex-basis: 100%; /* Sørg for at den tar full bredde på linjen */
}

.setting input[type="number"] {
     width: 80px; /* Mindre bredde for tall */
     flex-grow: 0;
}

.player-setup {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.player-config {
    flex: 1;
    min-width: 250px; /* For wrapping */
    border: 1px solid #4b5263;
    padding: 15px;
    border-radius: 6px;
    background-color: #40454f; /* Litt annen nyanse */
}
.player-config h3 {
     text-align: center;
     color: #61afef;
     border-bottom: none;
     margin-bottom: 15px;
}


.ai-options.hidden {
    display: none;
}

.code-help, .custom-strategy-section p small {
     font-size: 0.85em;
     color: #98c379;
     margin-top: -5px;
     margin-bottom: 10px;
     display: block;
     width: 100%;
     flex-basis: 100%;
}
.custom-strategy-section p small {
     color: #e06c75; /* Rød for advarsel */
}

/* Knapper */
button {
    padding: 8px 16px;
    font-size: 0.95em;
    background-color: #61afef; /* Lys blå */
    color: #21252b; /* Mørk tekst på lys knapp */
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
    margin: 5px 3px;
}

button:hover:not(:disabled) {
    background-color: #98c379; /* Grønn hover */
    transform: translateY(-1px);
}

button:disabled {
    background-color: #4b5263;
    color: #7f848e;
    cursor: not-allowed;
    opacity: 0.6;
}

.choice-btn.cooperate { background-color: #98c379; color: #282c34;} /* Grønn */
.choice-btn.cooperate:hover:not(:disabled) { background-color: #b4e490; }
.choice-btn.defect { background-color: #e06c75; color: #282c34; } /* Rød */
.choice-btn.defect:hover:not(:disabled) { background-color: #f08a93; }

.choice-btn.selected {
    box-shadow: 0 0 0 3px #e5c07b; /* Gulaktig kant */
    transform: scale(1.05);
}

/* Spillseksjon */
.game-status {
    text-align: center;
    margin-bottom: 20px;
    padding: 10px;
    background-color: #40454f;
    border-radius: 4px;
    font-size: 1.05em;
}
.game-status span { font-weight: bold; color: #e5c07b; }

.player-actions {
    display: flex;
    justify-content: space-around;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.player-action-panel {
    flex: 1;
    min-width: 250px;
    padding: 15px;
    border: 1px solid #4b5263;
    border-radius: 6px;
    text-align: center;
}

.player-action-panel .human-controls button {
    min-width: 110px;
}

.action-display {
    margin-top: 15px;
    font-size: 1.1em;
}
.action-display .chosen {
    font-weight: bold;
    font-size: 1.2em;
    padding: 3px 8px;
    border-radius: 3px;
    min-width: 30px;
    display: inline-block;
}
.action-display .cooperate { color: #98c379; background-color: rgba(152, 195, 121, 0.1); }
.action-display .defect { color: #e06c75; background-color: rgba(224, 108, 117, 0.1); }
.action-display .error { border: 1px dashed #e5c07b; }


.game-controls {
    text-align: center;
    margin-top: 15px;
    margin-bottom: 20px;
    padding-top: 15px;
    border-top: 1px solid #4b5263;
}
.game-controls label { margin: 0 5px 0 15px; }
#play-speed { vertical-align: middle; }
#speed-value { font-weight: bold; color: #e5c07b; }

/* Historikk Logg */
.history-log {
    margin-top: 20px;
}
#history-list {
    list-style-type: none;
    padding: 0;
    margin: 0;
    max-height: 200px;
    overflow-y: auto;
    background-color: #21252b;
    border: 1px solid #4b5263;
    border-radius: 4px;
    padding: 10px;
    font-size: 0.9em;
    font-family: monospace;
}
#history-list li {
    padding: 4px 0;
    border-bottom: 1px dashed #40454f;
}
#history-list li:last-child {
    border-bottom: none;
}
.history-choice-C { color: #98c379; }
.history-choice-D { color: #e06c75; }
.history-error-indicator { color: #e5c07b; font-style: italic; margin-left: 5px; }

.game-over-message {
     text-align: center;
     font-size: 1.3em;
     font-weight: bold;
     color: #98c379;
     margin-top: 20px;
     padding: 15px;
     background-color: #40454f;
     border-radius: 5px;
}

/* Turnering */
#tournament-agent-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 8px;
    margin-bottom: 15px;
    background-color: #40454f;
    padding: 15px;
    border-radius: 4px;
    max-height: 250px;
    overflow-y: auto;
}
#tournament-agent-list div {
    display: flex;
    align-items: center;
}
#tournament-agent-list label {
    margin-left: 8px;
    cursor: pointer;
    font-size: 0.95em;
}
#tournament-agent-list input[type="checkbox"] {
     cursor: pointer;
     accent-color: #61afef; /* Stil checkbox */
}

#tournament-status {
    text-align: center;
    margin: 15px 0;
    padding: 10px;
    background-color: #4b5263;
    border-radius: 4px;
    color: #e5c07b;
}

.tournament-results { margin-top: 20px; }
#tournament-results-table {
    width: 100%;
    border-collapse: collapse;
    background-color: #3b4048;
}
#tournament-results-table th, #tournament-results-table td {
    border: 1px solid #4b5263;
    padding: 8px 12px;
    text-align: left;
}
#tournament-results-table th {
    background-color: #4b5263;
    color: #e5c07b;
    position: sticky;
    top: 0;
}
#tournament-results-table tbody tr:nth-child(even) { background-color: #40454f; }
#tournament-results-table tbody tr:hover { background-color: #4f5663; }
#tournament-results-table td:nth-child(1), #tournament-results-table td:nth-child(3) { text-align: right; font-weight: bold; }
#tournament-results-table td:nth-child(1) { color: #98c379; width: 50px;}
#tournament-results-table td:nth-child(3) { color: #61afef; font-family: monospace; }

/* Footer / Referanse */
footer {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #444;
    text-align: center;
}
.payoff-matrix-ref {
    display: inline-block; /* Sentrerer tabellen */
    border: 1px solid #4b5263;
    padding: 10px;
    border-radius: 5px;
    background-color: #3b4048;
}
.payoff-matrix-ref h4 { color: #c678dd; border-bottom: none; margin-bottom: 8px; }
.payoff-matrix-ref table { border-collapse: collapse; margin: 0 auto; font-size: 0.9em; }
.payoff-matrix-ref th, .payoff-matrix-ref td { border: 1px solid #4b5263; padding: 5px 8px; }
.payoff-matrix-ref th { background-color: #4b5263; }
